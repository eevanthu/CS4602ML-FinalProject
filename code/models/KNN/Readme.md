# TSMC Stock Prediction: Cluster-Augmented KNN Module

[cite_start]æœ¬å­å°ˆæ¡ˆè² è²¬å»ºæ§‹ **Cluster-Augmented KNN (åˆ†ç¾¤å¢å¼·å‹ K-è¿‘é„°æ¼”ç®—æ³•)**ï¼Œä½œç‚ºæ•´é«” Stacking Ensemble æ¶æ§‹ä¸­çš„æ ¸å¿ƒåŸºåº•å­¸ç¿’å™¨ (Base Learner) ä¹‹ä¸€ [cite: 10, 112]ã€‚

## ğŸ§  æ ¸å¿ƒæŠ€è¡“æ¶æ§‹ (Technical Architecture)

æœ¬æ¨¡çµ„ä¸æ¡ç”¨å‚³çµ±çš„åŸå§‹æ•¸æ“šè¼¸å…¥ï¼Œè€Œæ˜¯é€éç©ºé–“ç¶­åº¦å¢å¼·æå‡é æ¸¬ç²¾åº¦ï¼š
1. [cite_start]**PCA é™ç¶­ (Dimensionality Reduction)**: é‡å° 117 ç¶­çš„é«˜ç¶­ç‰¹å¾µé€²è¡Œä¸»æˆåˆ†åˆ†æï¼Œæå–å‰ 40 å€‹æ­£äº¤ä¸»æˆåˆ†ï¼Œæœ‰æ•ˆå…‹æœã€Œç¶­åº¦ç½é›£ã€ä¸¦æ¿¾é™¤é›œè¨Š [cite: 141-145, 577-578]ã€‚
2. [cite_start]**K-Means å¸‚å ´åˆ†ç¾¤**: åˆ©ç”¨éç›£ç£å¼å­¸ç¿’è­˜åˆ¥ã€Œå¸‚å ´ç‹€æ…‹ (Market Regimes)ã€ã€‚å°‡åˆ†ç¾¤æ¨™ç±¤ä½œç‚ºé¡å¤–ç‰¹å¾µè¼¸å…¥ï¼Œå¼•å° KNN æ¨¡å‹åœ¨ç›¸ä¼¼çš„æ­·å²ç’°å¢ƒä¸­å°‹æ‰¾è¿‘é„° [cite: 146-147, 559, 602]ã€‚
3. [cite_start]**æ™‚åºå°é½Š (Temporal Alignment)**: é‡å°ç¾è‚¡æŒ‡æ•¸èˆ‡ ADR åŸ·è¡Œ `shift(1)`ï¼Œç¢ºä¿é æ¸¬æ™‚åƒ…ä½¿ç”¨å·²çŸ¥æ­·å²è³‡æ–™ï¼Œæœçµ• Data Leakage [cite: 81, 440-441]ã€‚

## ğŸ› ï¸ ç‰¹å¾µå·¥ç¨‹ç´°ç¯€ (Feature Engineering)

[cite_start]ç¨‹å¼ç¢¼å¯¦ä½œäº† `enhance_features` å‡½å¼ï¼Œç”¢ç”Ÿå…± 117 ç¶­çš„ç‰¹å¾µæ±  [cite: 122, 124]ï¼š
* [cite_start]**é‡åƒ¹å‹æ…‹**: åŒ…å« K æ£’å¯¦é«”æ¯”ä¾‹ã€ä¸Šä¸‹å½±ç·šé•·åº¦åŠå…‰é ­å…‰è…³ç·šè¾¨è­˜ [cite: 132-133]ã€‚
* [cite_start]**å‹•èƒ½æŒ‡æ¨™**: RSI (å«è¶…è²·è³£åˆ¤æ–·)ã€MACD (å«é»ƒé‡‘/æ­»äº¡äº¤å‰åµæ¸¬) [cite: 126-127]ã€‚
* [cite_start]**ç¾è‚¡è¯å‹•**: DJI, NASDAQ, SOX, SPX ä¹‹è®Šå‹•ç‡èˆ‡ ADR æº¢åƒ¹ç‹€æ³ [cite: 128-129]ã€‚
* [cite_start]**æ™‚é–“åºåˆ—é …**: åŒ…å« 1 è‡³ 10 æ—¥çš„æ»¯å¾Œé … (Lags) ä»¥æ•æ‰å¸‚å ´æ…£æ€§ [cite: 130-131]ã€‚

## ğŸ“ˆ å¯¦é©—çµæœ (Test Evaluation)

[cite_start]ç¶“éè¶…åƒæ•¸æƒæ ($k=11$, $n\_clusters=7$) [cite: 151, 299]ï¼Œæ¨¡å‹åœ¨ 2025 ç¨ç«‹æ¸¬è©¦é›†è¡¨ç¾å¦‚ä¸‹ï¼š
* [cite_start]**Accuracy**: 63.90% [cite: 303, 314]
* [cite_start]**Macro F1**: 0.6390 [cite: 309, 318]
* [cite_start]**Recall (Down=0)**: 77.38% (æ¨¡å‹å°æ–¼ä¸‹è·Œè¶¨å‹¢å…·å‚™æ¥µé«˜çš„è¾¨è­˜æ•æ„Ÿåº¦) [cite: 307]

## ğŸ“‹ è¼¸å‡ºè¦ç¯„ (Output for Stacking)

[cite_start]æœ¬ç¨‹å¼æœƒç”¢å‡ºå„å¹´ä»½çš„é æ¸¬çµæœæª” (ä¾‹å¦‚ `KNN_prediction_2022.csv`) [cite: 29]ï¼š
* **Date**: äº¤æ˜“æ—¥æœŸã€‚
* [cite_start]**Predict**: æ¨¡å‹è¼¸å‡ºçš„ä¸Šæ¼²æ©Ÿç‡å€¼ (Probability)ï¼Œä¾› Meta-Learner é€²è¡Œæœ€çµ‚æ±ºç­–æ¬Šé‡åˆ†é… [cite: 152, 277]ã€‚
